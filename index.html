<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ILLEGAL STORE - Underground Market</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=vt323&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'hacker-green': 'var(--theme-color)', // Dynamic Theme Color
              'hacker-dark': '#0a0a0a',
              'hacker-red': '#ff0033',
              'hacker-gray': '#1a1a1a',
            },
            fontFamily: {
              mono: ['"Share Tech Mono"', 'monospace'],
              pixel: ['"VT323"', 'monospace'],
            },
            animation: {
              'pulse-fast': 'pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite',
              'glitch': 'glitch 1s linear infinite',
              'fadeIn': 'fadeIn 0.5s ease-in-out forwards',
              'scan': 'scan 2s linear infinite',
              'spin-slow': 'spin 3s linear infinite',
            },
            keyframes: {
              glitch: {
                '2%, 64%': { transform: 'translate(2px,0) skew(0deg)' },
                '4%, 60%': { transform: 'translate(-2px,0) skew(0deg)' },
                '62%': { transform: 'translate(0,0) skew(5deg)' },
              },
              fadeIn: {
                '0%': { opacity: '0', transform: 'translateY(10px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              },
              scan: {
                '0%': { top: '0%' },
                '100%': { top: '100%' },
              }
            }
          },
        },
      }
    </script>
    <style>
      :root {
        --theme-color: #0f0; /* Default Green */
      }
      body {
        background-color: #000;
        color: var(--theme-color);
        overflow-x: hidden;
        user-select: none;
        -webkit-user-select: none;
      }
      /* Custom Scrollbar based on theme */
      ::-webkit-scrollbar { width: 10px; }
      ::-webkit-scrollbar-track { background: #000; }
      ::-webkit-scrollbar-thumb { background: var(--theme-color); border: 1px solid #000; }
      ::-webkit-scrollbar-thumb:hover { background: #fff; }
      
      .crt::before {
        content: " ";
        display: block;
        position: absolute;
        top: 0; left: 0; bottom: 0; right: 0;
        background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
        z-index: 50;
        background-size: 100% 2px, 3px 100%;
        pointer-events: none;
      }
      .glitch-text { position: relative; }
      .glitch-text::before, .glitch-text::after {
        content: attr(data-text);
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
      }
      .glitch-text::before {
        left: 2px; text-shadow: -1px 0 #ff00c1; clip: rect(44px, 450px, 56px, 0);
        animation: glitch-anim 5s infinite linear alternate-reverse;
      }
      .glitch-text::after {
        left: -2px; text-shadow: -1px 0 #00fff9; clip: rect(44px, 450px, 56px, 0);
        animation: glitch-anim2 5s infinite linear alternate-reverse;
      }
      @keyframes glitch-anim {
        0% { clip: rect(10px, 9999px, 80px, 0); }
        20% { clip: rect(40px, 9999px, 10px, 0); }
        40% { clip: rect(80px, 9999px, 90px, 0); }
        60% { clip: rect(20px, 9999px, 60px, 0); }
        80% { clip: rect(50px, 9999px, 30px, 0); }
        100% { clip: rect(90px, 9999px, 20px, 0); }
      }
      @keyframes glitch-anim2 {
        0% { clip: rect(80px, 9999px, 10px, 0); }
        20% { clip: rect(10px, 9999px, 90px, 0); }
        40% { clip: rect(50px, 9999px, 20px, 0); }
        60% { clip: rect(90px, 9999px, 60px, 0); }
        80% { clip: rect(30px, 9999px, 10px, 0); }
        100% { clip: rect(60px, 9999px, 50px, 0); }
      }
    </style>
</head>
  <body oncontextmenu="return false;">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
      import React, { useState, useEffect, useRef } from 'https://esm.sh/react@18.2.0';
      import { createRoot } from 'https://esm.sh/react-dom@18.2.0/client';
      import { Terminal, Shield, Lock, Activity, EyeOff, Radio, ArrowLeft, Bitcoin, Upload, CheckCircle, Copy, ScanLine, ShieldAlert, Cpu, FileDigit, Eye, ShieldCheck, Loader2, Bot, Send, Volume2, VolumeX, RefreshCw, Star, Coins, Zap } from 'https://esm.sh/lucide-react@0.300.0';

      // --- CONFIG ---
      const WALLET_BTC = "12UHsB3gPLkSvyCzDpp2sBPNQeaMggtPVM";
      const WALLET_USDT = "0x7c96ba14401ee4ff62230d1658ca4f1169ea4355"; // ERC20

      // --- TELEGRAM CONFIG ---
      const TELEGRAM_BOT_TOKEN = "7087538835:AAG57_9hX-ZFvgOVX9q16fnpSw9CxWTQ-i8";
      const TELEGRAM_CHAT_ID = "6043270781";

      // --- AUDIO SYSTEM ---
      const AudioContext = window.AudioContext || window.webkitAudioContext;
      const audioCtx = new AudioContext();

      const playSound = (type, enabled) => {
        if (!enabled) return;
        if (audioCtx.state === 'suspended') audioCtx.resume();

        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode);
        gainNode.connect(audioCtx.destination);

        if (type === 'click') {
          osc.type = 'square';
          osc.frequency.setValueAtTime(800, audioCtx.currentTime);
          osc.frequency.exponentialRampToValueAtTime(300, audioCtx.currentTime + 0.05);
          gainNode.gain.setValueAtTime(0.05, audioCtx.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.05);
          osc.start();
          osc.stop(audioCtx.currentTime + 0.05);
        } else if (type === 'access') {
          osc.type = 'sawtooth';
          osc.frequency.setValueAtTime(200, audioCtx.currentTime);
          osc.frequency.linearRampToValueAtTime(600, audioCtx.currentTime + 0.1);
          gainNode.gain.setValueAtTime(0.05, audioCtx.currentTime);
          osc.start();
          osc.stop(audioCtx.currentTime + 0.3);
        } else if (type === 'error') {
          osc.type = 'sawtooth';
          osc.frequency.setValueAtTime(100, audioCtx.currentTime);
          osc.frequency.linearRampToValueAtTime(50, audioCtx.currentTime + 0.2);
          gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
          osc.start();
          osc.stop(audioCtx.currentTime + 0.3);
        }
      };

      // --- DATA ---
      const MOCK_DATA = [
        // --- NEW DEEP WEB TOOLS (Discounted) ---
        { 
          id: 'tool_pegasus',
          name: 'Pegasus Spyware (Nirvana Ed.)', 
          description: 'The legendary state-grade surveillance tool. Zero-click infection vector for iOS 17.x and Android 14. Full access to encrypted messages (Signal, WhatsApp), microphone, camera, and GPS history. This is the leaked "Nirvana" source code allowing for self-hosting C2. Extremely rare.', 
          size: '8.4 GB', 
          price: 60.00, 
          originalPrice: 100.00,
          discount: 40,
          type: 'APP', 
          downloads: 42, 
          riskLevel: 'CRITICAL',
          image: 'https://i.ibb.co/tTDGq47b/750x450-398020-pegasus-spyware.png',
          reviews: [
             { user: "Ghost_Writer", rating: 5, text: "Expensive but worth every penny. Setup was clean." },
             { user: "Anon244", rating: 5, text: "Works on iOS 17.2 verified." }
          ]
        },
        { 
          id: 'tool_cobalt',
          name: 'Cobalt Strike 4.9 (Licensed)', 
          description: 'The standard for advanced adversary simulation. This is not a cracked version; it is a stolen Licensed Team Server. Includes valid Malleable C2 profiles to mimic legitimate traffic (Amazon, Google, jQuery) and bypass EDR/XDR. Comes with Artifact Kit and Sleep Mask.', 
          size: '480 MB', 
          price: 45.00, 
          originalPrice: 75.00,
          discount: 40,
          type: 'APP', 
          downloads: 128, 
          riskLevel: 'HIGH',
          image: 'https://i.ibb.co/pvsF35Pf/Cobalt-Strike-4-9-Released-1.jpg',
          reviews: [
             { user: "RedTeamer", rating: 5, text: "Artifact kit is undetected by Defender. A++" }
          ]
        },
        { 
          id: 'tool_exploit_kit',
          name: 'Zero-Click Exploit Kit (0-day)', 
          description: 'A collection of unpatched zero-day exploits targeting Chrome V8 Engine and Windows Kernel (Local Privilege Escalation). Includes the "SilentLink" builder which executes payload upon SMS receipt without user interaction. Highest success rate in the market.', 
          size: '1.2 GB', 
          price: 30.00, 
          originalPrice: 50.00,
          discount: 40,
          type: 'APP', 
          downloads: 15, 
          riskLevel: 'CRITICAL',
          image: 'https://i.ibb.co/HLLhdTK7/icon-what-is-zero-click-attack.jpg',
          reviews: []
        },

        // --- EXISTING TOOLS ---
        { 
          id: 'tool_xworm',
          name: 'X-Worm V6.0 Platinum', 
          description: 'One of the most dangerous espionage tools returns with Version 6.0. Equipped with over 35 plugins, it executes surveillance and data theft on an unprecedented scale. Includes specialized modules: Stealer.dll & Chromium.dll (harvests Chrome, Telegram, Discord, MetaMask), RemoteDesktop.dll (HVNC), Webcam.dll (Spying), Ransomware.dll (Encryption/Extortion), and Rootkit.dll for absolute stealth. Developed by EvilCoder, this tool transforms any infected machine into a miniature cyber-army node.', 
          size: '42 MB', 
          price: 18.00, 
          type: 'APP', 
          downloads: 1840, 
          riskLevel: 'HIGH',
          image: 'https://i.ibb.co/Ndszmwq8/xwo.png',
          reviews: [
            { user: "ScriptKiddie99", rating: 4, text: "Easy to use builder. Stub is FUD." },
            { user: "DarkL0rd", rating: 5, text: "Best RAT on the market." }
          ]
        },
        { 
          id: 'tool_crax',
          name: 'CraxRat V7.4 Enterprise', 
          description: 'Enterprise-grade Android Remote Administration Tool tailored for absolute stealth. Features polymorphic FUD payload generation to bypass Play Protect, live HVNC (Hidden VNC) for invisible screen interaction, and real-time file management. V7.4 introduces enhanced persistence modules and encrypted C2 communication protocols for undetectable operation.', 
          size: '185 MB', 
          price: 15.00, 
          type: 'APP', 
          downloads: 2420, 
          riskLevel: 'CRITICAL',
          image: 'https://i.ibb.co/zym1d3S/1754496069047.png',
          reviews: []
        },
        
        // Files (ONLY DISCORD)
        { 
          id: 'file_discord',
          name: 'Discord 2013 (OG)', 
          description: 'Rare legacy account created in 2013. Includes full access to the Original Email (OGE). These accounts carry the highest trust factor in the ecosystem, ensuring immunity to most anti-spam filters and captcha verifications. Clean history, no phone linked, and perfect for high-profile server administration or social engineering operations.', 
          size: 'ACC', 
          price: 70.00, 
          type: 'FILE', 
          downloads: 16, 
          riskLevel: 'LOW',
          image: 'https://i.ibb.co/chDBwc8v/discord.png',
          reviews: [
            { user: "SocialEngineer", rating: 5, text: "Account was aged perfectly. No bans." }
          ]
        }
      ];

      // --- UTILS ---
      const countries = ["USA", "Russia", "China", "Germany", "Brazil", "France", "UK", "Japan"];
      const actions = ["Initiating handshake...", "Bypassing firewall...", "Decryption key found...", "Connecting to TOR node...", "Accessing database...", "Spoofing IP address...", "Clearing logs..."];

      // --- COMPONENTS ---

      const MatrixRain = () => {
        const canvasRef = useRef(null);

        useEffect(() => {
          const canvas = canvasRef.current;
          if (!canvas) return;

          const ctx = canvas.getContext('2d');
          if (!ctx) return;

          let width = (canvas.width = window.innerWidth);
          let height = (canvas.height = window.innerHeight);
          
          const str = '01日ｦｱｳｴｵｶｷｸｹｺｻｼｽｾｿﾀﾁﾂﾃﾄﾅﾆﾇﾈﾉﾊﾋﾌﾍﾎﾏﾐﾑﾒﾓﾔﾕﾖﾗﾘﾙﾚﾛﾜﾝ';
          const matrix = str.split('');
          const fontSize = 14;
          const columns = width / fontSize;
          const drops = [];
          for (let x = 0; x < columns; x++) drops[x] = 1;

          const draw = () => {
            // Theme color awareness (basic approximation for green)
            // Ideally we get the computed style variable, but for canvas perf we keep it green or simple
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, width, height);
            
            // Get current theme color from root
            const rootStyles = getComputedStyle(document.documentElement);
            const themeColor = rootStyles.getPropertyValue('--theme-color').trim() || '#0f0';
            
            ctx.fillStyle = themeColor;
            ctx.font = `${fontSize}px monospace`;
            
            for (let i = 0; i < drops.length; i++) {
              const text = matrix[Math.floor(Math.random() * matrix.length)];
              ctx.fillText(text, i * fontSize, drops[i] * fontSize);
              if (drops[i] * fontSize > height && Math.random() > 0.975) drops[i] = 0;
              drops[i]++;
            }
          };

          const interval = setInterval(draw, 33);
          const handleResize = () => {
              width = canvas.width = window.innerWidth;
              height = canvas.height = window.innerHeight;
          };
          window.addEventListener('resize', handleResize);
          return () => {
            clearInterval(interval);
            window.removeEventListener('resize', handleResize);
          };
        }, []);

        return (
          <canvas ref={canvasRef} className="fixed top-0 left-0 w-full h-full z-0 opacity-40 pointer-events-none" />
        );
      };

      const LiveLogs = () => {
        const [logs, setLogs] = useState([]);

        useEffect(() => {
          const interval = setInterval(() => {
             const action = actions[Math.floor(Math.random() * actions.length)];
             const time = new Date().toLocaleTimeString('en-US', {hour12: false, hour: "2-digit", minute:"2-digit", second:"2-digit"});
             const newLog = `[${time}] root@kali: ${action}`;
             
             setLogs(prev => [newLog, ...prev].slice(0, 5));
          }, 2000);
          return () => clearInterval(interval);
        }, []);

        return (
           <div className="fixed bottom-4 left-4 z-30 font-mono text-[10px] md:text-xs opacity-70 pointer-events-none">
              {logs.map((log, i) => (
                 <div key={i} className="text-hacker-green/80 drop-shadow-md">{log}</div>
              ))}
           </div>
        );
      };

      const PurchaseToast = () => {
         const [toast, setToast] = useState(null);

         useEffect(() => {
            const loop = () => {
               const randomDelay = Math.random() * 10000 + 5000;
               setTimeout(() => {
                  const item = MOCK_DATA[Math.floor(Math.random() * MOCK_DATA.length)];
                  const country = countries[Math.floor(Math.random() * countries.length)];
                  setToast({ item: item.name, country });
                  
                  setTimeout(() => setToast(null), 4000);
                  loop();
               }, randomDelay);
            };
            loop();
         }, []);

         if (!toast) return null;

         return (
            <div className="fixed top-20 right-4 z-50 bg-black/90 border border-hacker-green p-3 flex items-center gap-3 animate-fadeIn shadow-[0_0_15px_rgba(0,255,0,0.2)] max-w-xs">
               <div className="bg-hacker-green/20 p-2 rounded-full">
                  <Coins size={16} className="text-hacker-green" />
               </div>
               <div className="text-xs font-mono">
                  <div className="text-gray-400">Someone from <span className="text-white font-bold">{toast.country}</span></div>
                  <div className="text-hacker-green truncate w-40">purchased {toast.item}</div>
               </div>
            </div>
         );
      };

      const HackingGame = ({ onClose, onCodeGenerated }) => {
         const [display, setDisplay] = useState("----");
         const [status, setStatus] = useState("READY TO INTERCEPT");
         const [isHacking, setIsHacking] = useState(false);

         const startHack = () => {
            setIsHacking(true);
            setStatus("INTERCEPTING SIGNAL...");
            
            let shuffles = 0;
            const maxShuffles = 25; // Duration of shuffling
            
            const interval = setInterval(() => {
               setDisplay(Math.floor(1000 + Math.random() * 9000).toString());
               shuffles++;
               
               if (shuffles >= maxShuffles) {
                  clearInterval(interval);
                  // Generate final code
                  const finalCode = Math.floor(1000 + Math.random() * 9000).toString();
                  setDisplay(finalCode);
                  setStatus("SIGNAL LOCKED - MEMORIZE!");
                  onCodeGenerated(finalCode); 

                  // Hide after 2 seconds
                  setTimeout(() => {
                     setDisplay("----");
                     setStatus("SIGNAL LOST");
                     setTimeout(onClose, 1000);
                  }, 2000);
               }
            }, 50);
         };

         return (
            <div className="fixed inset-0 z-[60] bg-black/95 flex items-center justify-center font-mono animate-fadeIn p-4">
               <div className="w-full max-w-md bg-gray-900 border-2 border-hacker-green p-6 relative shadow-[0_0_30px_rgba(0,255,0,0.3)]">
                  <button onClick={onClose} className="absolute top-2 right-2 text-gray-500 hover:text-white">X</button>
                  <h2 className="text-xl font-bold text-white mb-4 flex items-center gap-2"><Zap size={20}/> SIGNAL INTERCEPTOR</h2>
                  
                  <div className="bg-black p-12 mb-6 border border-gray-700 text-center relative overflow-hidden">
                     <div className="absolute inset-0 bg-hacker-green/5 pointer-events-none"></div>
                     <div className="absolute top-0 left-0 w-full h-1 bg-hacker-green/30 animate-scan"></div>
                     
                     <div className="text-6xl font-bold text-hacker-green mb-2 font-mono tracking-widest glitch-text" data-text={display}>
                        {display}
                     </div>
                     <div className="text-xs text-hacker-red font-bold animate-pulse">{status}</div>
                  </div>

                  {!isHacking && (
                     <button 
                        onClick={startHack}
                        className="w-full bg-hacker-green text-black font-bold py-3 hover:bg-white transition-colors uppercase tracking-widest"
                     >
                        INTERCEPT CODE
                     </button>
                  )}
               </div>
            </div>
         );
      };

      const ThemeSwitcher = ({ setTheme }) => {
         const themes = [
            { name: 'Green', color: '#0f0' },
            { name: 'Red', color: '#ff0033' },
            { name: 'Blue', color: '#0088ff' },
            { name: 'Amber', color: '#ffb000' }
         ];

         return (
            <div className="flex gap-2">
               {themes.map(t => (
                  <button 
                     key={t.name}
                     onClick={() => setTheme(t.color)}
                     className="w-4 h-4 rounded-full border border-gray-600 hover:scale-110 transition-transform"
                     style={{ backgroundColor: t.color }}
                     title={`${t.name} Theme`}
                  />
               ))}
            </div>
         );
      };

      const SecurityCheck = ({ onVerified }) => {
        const [progress, setProgress] = useState(0);
        const [status, setStatus] = useState("Initializing Security Protocols...");

        useEffect(() => {
          const steps = [
            { p: 20, s: "Checking Browser Fingerprint..." },
            { p: 45, s: "Verifying Anti-Bot Token..." },
            { p: 70, s: "Establishing Encrypted Tunnel..." },
            { p: 90, s: "Analyzing Network Traffic..." },
            { p: 100, s: "Access Granted." }
          ];

          let currentStep = 0;

          const interval = setInterval(() => {
            if (currentStep >= steps.length) {
               clearInterval(interval);
               setTimeout(onVerified, 800);
               return;
            }
            
            const step = steps[currentStep];
            setProgress(step.p);
            setStatus(step.s);
            currentStep++;
          }, 800);

          return () => clearInterval(interval);
        }, [onVerified]);

        return (
           <div className="fixed inset-0 z-50 bg-black flex flex-col items-center justify-center font-mono text-hacker-green">
              <div className="w-full max-w-md p-8 border border-hacker-green/30 bg-gray-900/50 relative overflow-hidden">
                 <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-hacker-green to-transparent animate-scan opacity-50"></div>
                 
                 <div className="flex justify-center mb-8">
                    <ShieldCheck size={64} className="animate-pulse" />
                 </div>
                 
                 <h2 className="text-2xl font-bold text-center mb-2">DDoS PROTECTION</h2>
                 <p className="text-center text-xs text-gray-500 mb-8">VERIFYING CONNECTION SECURITY</p>
                 
                 <div className="w-full h-2 bg-gray-800 border border-gray-700 mb-4 overflow-hidden">
                    <div 
                      className="h-full bg-hacker-green transition-all duration-500 ease-out"
                      style={{ width: `${progress}%` }}
                    ></div>
                 </div>
                 
                 <div className="flex justify-between items-center text-xs">
                    <span className="text-hacker-green animate-pulse">> {status}</span>
                    <span className="text-gray-500">{progress}%</span>
                 </div>
              </div>
              <div className="mt-4 text-[10px] text-gray-600">
                 ID: {Math.random().toString(36).substr(2, 9).toUpperCase()}
              </div>
           </div>
        );
      };

      const CaptchaView = ({ onVerified }) => {
        const [seconds, setSeconds] = useState(5);
        
        useEffect(() => {
            if (seconds > 0) {
                const timer = setTimeout(() => setSeconds(seconds - 1), 1000);
                return () => clearTimeout(timer);
            } else {
                onVerified();
            }
        }, [seconds, onVerified]);

        return (
          <div className="fixed inset-0 z-40 bg-black/95 backdrop-blur-sm flex flex-col items-center justify-center font-mono animate-fadeIn">
             <div className="bg-gray-900 border border-hacker-green p-8 rounded max-w-sm w-full text-center shadow-[0_0_50px_rgba(0,255,0,0.2)] relative overflow-hidden">
                <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-hacker-green to-transparent animate-scan opacity-70"></div>
                
                <div className="mb-8 flex justify-center relative">
                    <div className="absolute inset-0 bg-hacker-green blur-xl opacity-20"></div>
                    <Bot size={64} className="text-hacker-green relative z-10 animate-pulse" />
                </div>
                
                <h2 className="text-xl text-white font-bold mb-2 tracking-widest">SECURITY CHECK</h2>
                <p className="text-gray-400 text-xs mb-6 uppercase tracking-wider">Verifying you are not a robot...</p>
                
                <div className="w-full bg-gray-800 h-1 mb-4">
                   <div 
                     className="bg-hacker-green h-full transition-all duration-1000 ease-linear"
                     style={{ width: `${((5 - seconds) / 5) * 100}%` }}
                   ></div>
                </div>
                
                <div className="text-hacker-green font-mono text-xl font-bold animate-pulse">
                   PLEASE WAIT {seconds}s
                </div>
             </div>
          </div>
        );
      }

      const CryptoCalculator = ({ enabledSound }) => {
         const [usd, setUsd] = useState(100);
         const btcPrice = 64000; 
         const usdtPrice = 1;

         return (
            <div className="mt-8 mb-4 border border-hacker-green/30 p-4 bg-gray-900/50 backdrop-blur-sm max-w-sm mx-auto">
               <h3 className="text-hacker-green text-sm font-bold mb-3 flex items-center gap-2">
                  <RefreshCw size={14}/> QUICK CONVERTER
               </h3>
               <div className="flex items-center gap-2 mb-2">
                  <span className="text-gray-400 text-xs">USD $</span>
                  <input 
                     type="number" 
                     value={usd} 
                     onChange={(e) => {
                        setUsd(e.target.value);
                        playSound('click', enabledSound);
                     }}
                     className="bg-black border border-gray-600 text-white w-24 px-2 py-1 text-sm outline-none focus:border-hacker-green"
                  />
               </div>
               <div className="grid grid-cols-2 gap-4 text-xs font-mono">
                  <div className="bg-black p-2 border border-gray-800">
                     <span className="text-yellow-500 block mb-1">BTC</span>
                     {(usd / btcPrice).toFixed(6)}
                  </div>
                  <div className="bg-black p-2 border border-gray-800">
                     <span className="text-green-500 block mb-1">USDT</span>
                     {(usd / usdtPrice).toFixed(2)}
                  </div>
               </div>
            </div>
         );
      };

      const StoreCard = ({ item, onClick, enabledSound }) => {
        const isCritical = item.riskLevel === 'CRITICAL' || item.riskLevel === 'HIGH';
        const hasDiscount = item.discount && item.discount > 0;
        
        return (
          <div 
            onClick={() => {
               onClick(item);
               playSound('click', enabledSound);
            }}
            onMouseEnter={() => playSound('access', enabledSound)}
            className={`
            cursor-pointer
            relative group border border-hacker-green/30 bg-black/80 
            hover:border-hacker-green hover:shadow-[0_0_15px_rgba(0,255,0,0.3)] 
            transition-all duration-300 backdrop-blur-sm overflow-hidden flex flex-col
            ${isCritical ? 'hover:border-hacker-red hover:shadow-[0_0_15px_rgba(255,0,51,0.3)]' : ''}
          `}>
            {/* CORNER ACCENTS */}
            <div className="absolute top-0 left-0 w-2 h-2 border-t-2 border-l-2 border-hacker-green group-hover:w-full group-hover:h-full transition-all duration-500 opacity-50 pointer-events-none z-20"></div>
            <div className="absolute bottom-0 right-0 w-2 h-2 border-b-2 border-r-2 border-hacker-green group-hover:w-full group-hover:h-full transition-all duration-500 opacity-50 pointer-events-none z-20"></div>

            {/* IMAGE SECTION */}
            <div className="h-40 w-full bg-black/50 border-b border-hacker-green/20 relative group-hover:border-hacker-green/50 transition-colors shrink-0 overflow-hidden">
               {item.image ? (
                 <img 
                   src={item.image} 
                   alt={item.name} 
                   className="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500" 
                 />
               ) : (
                 <div className="w-full h-full flex items-center justify-center bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]">
                   {item.type === 'APP' ? (
                     <Cpu size={64} className="text-hacker-green opacity-20 group-hover:opacity-100 group-hover:scale-110 transition-all duration-300" />
                   ) : (
                     <FileDigit size={64} className="text-blue-500 opacity-20 group-hover:opacity-100 group-hover:scale-110 transition-all duration-300" />
                   )}
                 </div>
               )}
               
               {/* BADGES */}
               <div className="absolute top-2 left-2 px-2 py-1 bg-black/80 border border-hacker-green/30 text-[10px] font-mono tracking-widest text-hacker-green z-20">
                  {item.type}
               </div>

               {hasDiscount && (
                 <div className="absolute top-2 right-2 px-2 py-1 bg-red-600 text-white text-[10px] font-bold tracking-widest z-20 shadow-[0_0_10px_rgba(255,0,0,0.5)] animate-pulse">
                   -{item.discount}% OFF
                 </div>
               )}

               {/* RISK BADGE */}
               {isCritical && (
                 <div className={`absolute ${hasDiscount ? 'bottom-2 right-2' : 'top-2 right-2'} px-2 py-1 bg-hacker-red/20 border border-hacker-red text-[10px] font-mono tracking-widest text-hacker-red flex items-center gap-1`}>
                    <ShieldAlert size={12} /> {item.riskLevel === 'CRITICAL' ? 'USE IN VMWARE' : `RISK: ${item.riskLevel}`}
                 </div>
               )}
            </div>

            {/* CONTENT SECTION */}
            <div className="p-4 flex flex-col flex-grow">
              <h3 className={`text-xl font-bold font-mono truncate mb-2 ${isCritical ? 'text-hacker-red' : 'text-white'}`}>
                {item.name}
              </h3>
              
              <p className="text-gray-400 text-sm h-10 overflow-hidden mb-4 font-mono leading-tight line-clamp-2">
                {item.description}
              </p>

              <div className="mt-auto">
                <div className="grid grid-cols-2 gap-2 text-xs font-mono text-gray-500 mb-4 border-t border-gray-800 pt-2">
                  <div>SIZE: <span className="text-hacker-green">{item.size}</span></div>
                  <div>
                    COST: 
                    {hasDiscount ? (
                      <span className="ml-1">
                         <span className="line-through text-gray-600 mr-2">{item.originalPrice}</span>
                         <span className="text-yellow-500 font-bold">${item.price}</span>
                      </span>
                    ) : (
                      <span className="text-yellow-500 ml-1">${item.price}</span>
                    )}
                  </div>
                  <div>DLs: <span className="text-white">{item.downloads}</span></div>
                  <div>ID: <span className="text-gray-600">#{item.id.split('_')[1] || item.id}</span></div>
                </div>

                <button 
                  className={`
                    w-full py-2 flex items-center justify-center gap-2 
                    font-bold text-sm uppercase tracking-wider
                    border 
                    transition-all duration-200
                    ${isCritical 
                      ? 'border-hacker-red text-hacker-red hover:bg-hacker-red hover:text-black' 
                      : 'border-hacker-green text-hacker-green hover:bg-hacker-green hover:text-black'}
                  `}
                >
                  <Eye className="w-4 h-4" />
                  <span>ACCESS PRODUCT</span>
                </button>
              </div>
            </div>
          </div>
        );
      };

      // --- VIEW COMPONENTS (Defined OUTSIDE App) ---

      const HomeView = ({ items, activeTab, setActiveTab, openProduct, enabledSound }) => {
         // Dynamic User Count
         const [userCount, setUserCount] = useState(4021);
         
         useEffect(() => {
           const interval = setInterval(() => {
             // Random count between 1 and 500 to simulate varying traffic
             const newCount = Math.floor(Math.random() * 500) + 5; 
             setUserCount(newCount);
           }, 4000);
           return () => clearInterval(interval);
         }, []);

         return (
          <div className="animate-fadeIn">
            <header className="mb-8 text-center border-b-2 border-hacker-green/20 pb-8">
              <div className="flex justify-center items-center gap-4 mb-4 animate-pulse">
                  <EyeOff size={48} className="text-hacker-red" />
                  <h1 className="text-5xl md:text-7xl font-bold tracking-tighter text-white glitch-text" data-text="ILLEGAL STORE" style={{ textShadow: '2px 2px 0px #ff0033, -2px -2px 0px #00ff00' }}>
                    ILLEGAL STORE
                  </h1>
                  <Lock size={48} className="text-hacker-red" />
              </div>
              <p className="text-hacker-green/70 text-lg uppercase tracking-[0.5em] mb-2">
                The Hidden Marketplace
              </p>
              <div className="flex justify-center items-center gap-6 text-xs text-gray-500">
                <span className="flex items-center gap-1 text-green-500"><div className="w-2 h-2 bg-green-500 rounded-full animate-ping"/> STATUS: ONLINE</span>
                <span className="flex items-center gap-1"><Radio size={12}/> ENCRYPTION: 256-BIT</span>
                <span className="flex items-center gap-1"><Activity size={12}/> USERS: <span className="text-white font-bold">{userCount}</span></span>
              </div>
              
              <CryptoCalculator enabledSound={enabledSound} />

            </header>

            <div className="flex justify-center mb-12">
              <div className="flex border border-hacker-green/50 bg-black/80 backdrop-blur-md p-1">
                <button
                  onClick={() => { setActiveTab('APP'); playSound('click', enabledSound); }}
                  className={`
                    px-8 py-3 text-xl font-bold uppercase tracking-widest transition-all duration-300
                    flex items-center gap-3
                    ${activeTab === 'APP' 
                      ? 'bg-hacker-green text-black shadow-[0_0_20px_rgba(0,255,0,0.4)]' 
                      : 'text-hacker-green hover:bg-hacker-green/10'}
                  `}
                >
                  <Terminal size={20} />
                  Applications
                </button>
                <button
                  onClick={() => { setActiveTab('FILE'); playSound('click', enabledSound); }}
                  className={`
                    px-8 py-3 text-xl font-bold uppercase tracking-widest transition-all duration-300
                    flex items-center gap-3
                    ${activeTab === 'FILE' 
                      ? 'bg-blue-600 text-black shadow-[0_0_20px_rgba(37,99,235,0.4)]' 
                      : 'text-blue-500 hover:bg-blue-600/10'}
                  `}
                >
                  <Shield size={20} />
                  Files & Accounts
                </button>
              </div>
            </div>

            <main className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-20">
              {items.map((item) => (
                <StoreCard key={item.id} item={item} onClick={openProduct} enabledSound={enabledSound} />
              ))}
            </main>
          </div>
        );
      };

      const DetailView = ({ selectedItem, goHome, startCheckout, enabledSound }) => (
        <div className="animate-fadeIn">
          <button onClick={() => { goHome(); playSound('click', enabledSound); }} className="flex items-center gap-2 text-hacker-green hover:text-white mb-6 border border-transparent hover:border-hacker-green px-4 py-2 transition-all">
            <ArrowLeft size={16} /> RETURN TO MARKET
          </button>
          
          <div className="bg-black/80 border border-hacker-green/40 p-1 backdrop-blur-md shadow-[0_0_30px_rgba(0,255,0,0.1)]">
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-0 lg:gap-8">
              <div className="relative border-b lg:border-b-0 lg:border-r border-hacker-green/30 bg-black">
                 <div className="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent z-10"></div>
                 {selectedItem?.image ? (
                   <img src={selectedItem.image} alt={selectedItem.name} className="w-full h-full object-cover opacity-90" />
                 ) : (
                   <div className="w-full h-96 flex items-center justify-center bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]">
                      {selectedItem?.type === 'APP' ? (
                        <Cpu size={100} className="text-hacker-green opacity-30" />
                      ) : (
                        <FileDigit size={100} className="text-blue-500 opacity-30" />
                      )}
                   </div>
                 )}
                 <div className="absolute bottom-4 left-4 z-20">
                   <div className="text-hacker-green text-xs font-bold tracking-widest border border-hacker-green inline-block px-2 py-1 mb-2 bg-black/80">
                     {selectedItem?.type}
                   </div>
                   <div className="text-hacker-red text-xs font-bold tracking-widest border border-hacker-red inline-block px-2 py-1 bg-black/80 ml-2 animate-pulse">
                     {selectedItem?.riskLevel === 'CRITICAL' ? 'USE IN VMWARE' : `RISK: ${selectedItem?.riskLevel}`}
                   </div>
                   {selectedItem?.discount && (
                     <div className="bg-red-600 text-white text-xs font-bold tracking-widest inline-block px-2 py-1 ml-2 animate-pulse shadow-[0_0_10px_red]">
                       -{selectedItem.discount}% OFF
                     </div>
                   )}
                 </div>
              </div>

              <div className="p-8 flex flex-col justify-between">
                <div>
                  <h1 className="text-3xl md:text-5xl font-bold text-white mb-2 font-mono glitch-text" data-text={selectedItem?.name}>
                    {selectedItem?.name}
                  </h1>
                  <div className="w-20 h-1 bg-hacker-green mb-6"></div>
                  
                  <div className="space-y-4 mb-8 text-gray-400 font-mono text-lg leading-relaxed">
                    <p>{selectedItem?.description}</p>
                  </div>

                  {/* REVIEWS SECTION */}
                  {selectedItem.reviews && selectedItem.reviews.length > 0 && (
                     <div className="mb-6 bg-gray-900/40 p-4 border-l-2 border-hacker-green/50">
                        <h4 className="text-xs font-bold text-hacker-green mb-3 uppercase flex items-center gap-2"><Star size={12}/> Verified Feedback</h4>
                        {selectedItem.reviews.map((rev, idx) => (
                           <div key={idx} className="mb-2 last:mb-0 text-sm">
                              <span className="text-yellow-500 font-bold">★ {rev.rating}</span> 
                              <span className="text-gray-500 mx-2">|</span> 
                              <span className="text-white font-bold">{rev.user}:</span> 
                              <span className="text-gray-400 italic"> "{rev.text}"</span>
                           </div>
                        ))}
                     </div>
                  )}

                  <div className="grid grid-cols-2 gap-4 mb-8 p-4 bg-hacker-green/5 border border-hacker-green/20">
                    <div className="flex flex-col">
                      <span className="text-xs text-gray-500 uppercase">File Size</span>
                      <span className="text-hacker-green font-bold">{selectedItem?.size}</span>
                    </div>
                    <div className="flex flex-col">
                      <span className="text-xs text-gray-500 uppercase">Version</span>
                      <span className="text-hacker-green font-bold">LAST UPDATE</span>
                    </div>
                    <div className="flex flex-col">
                      <span className="text-xs text-gray-500 uppercase">Downloads</span>
                      <span className="text-white font-bold">{selectedItem?.downloads}</span>
                    </div>
                    <div className="flex flex-col">
                      <span className="text-xs text-gray-500 uppercase">Support</span>
                      <span className="text-white font-bold">12/7</span>
                    </div>
                  </div>
                </div>

                <div className="flex items-center justify-between border-t border-gray-800 pt-6">
                   <div className="flex flex-col">
                      {selectedItem?.discount ? (
                        <>
                          <span className="text-sm text-gray-500 line-through">${selectedItem.originalPrice}</span>
                          <span className="text-3xl font-bold text-yellow-500 font-mono">${selectedItem?.price}</span>
                        </>
                      ) : (
                        <span className="text-3xl font-bold text-yellow-500 font-mono">${selectedItem?.price}</span>
                      )}
                   </div>
                   <button 
                     onClick={() => { startCheckout(); playSound('click', enabledSound); }}
                     className="bg-hacker-green hover:bg-white text-black font-bold text-xl px-12 py-4 uppercase tracking-wider shadow-[0_0_15px_rgba(0,255,0,0.5)] hover:shadow-[0_0_25px_rgba(0,255,0,0.8)] transition-all transform hover:-translate-y-1"
                   >
                     BUY NOW
                   </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      );

      const CheckoutView = ({ selectedItem, email, setEmail, insta, setInsta, file, setFile, completeOrder, copyToClipboard, setView, isSubmitting, enabledSound }) => {
        const [previewUrl, setPreviewUrl] = useState(null);
        const [timer, setTimer] = useState(900); // 15 minutes in seconds
        const [promoCode, setPromoCode] = useState("");
        const [discountApplied, setDiscountApplied] = useState(false);
        const [showHackGame, setShowHackGame] = useState(false);
        const [serverCode, setServerCode] = useState(null);
        
        const currentPrice = discountApplied ? (selectedItem.price - 5).toFixed(2) : selectedItem.price;

        useEffect(() => {
           const interval = setInterval(() => {
              setTimer(t => t > 0 ? t - 1 : 0);
           }, 1000);
           return () => clearInterval(interval);
        }, []);

        const formatTime = (s) => {
           const m = Math.floor(s / 60);
           const sec = s % 60;
           return `${m}:${sec < 10 ? '0'+sec : sec}`;
        };

        const handleFileChange = (e) => {
          const selectedFile = e.target.files ? e.target.files[0] : null;
          setFile(selectedFile);
          if (selectedFile) {
            const reader = new FileReader();
            reader.onloadend = () => {
              setPreviewUrl(reader.result);
            };
            reader.readAsDataURL(selectedFile);
          } else {
            setPreviewUrl(null);
          }
        };

        const applyPromo = () => {
           if (serverCode && promoCode === serverCode) {
              setDiscountApplied(true);
              playSound('access', enabledSound);
              alert("ACCESS GRANTED. $5 DISCOUNT APPLIED.");
           } else {
              playSound('error', enabledSound);
              alert("ACCESS DENIED: INVALID OR EXPIRED CODE");
           }
        };

        return (
          <div className="max-w-4xl mx-auto animate-fadeIn relative">
            {showHackGame && <HackingGame onClose={() => setShowHackGame(false)} onCodeGenerated={setServerCode} />}
            
            <button onClick={() => { setView('DETAIL'); playSound('click', enabledSound); }} className="flex items-center gap-2 text-hacker-green hover:text-white mb-6">
              <ArrowLeft size={16} /> BACK TO PRODUCT
            </button>

            <div className="bg-black/90 border border-hacker-green p-8 relative overflow-hidden">
              <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-hacker-green to-transparent animate-pulse"></div>
              
              <div className="flex justify-between items-center mb-8">
                 <h2 className="text-3xl font-bold text-white flex items-center gap-3">
                   <Lock className="text-hacker-red" /> SECURE CHECKOUT
                 </h2>
                 <div className="text-hacker-red font-mono font-bold border border-hacker-red px-4 py-2 animate-pulse">
                    SESSION EXPIRES: {formatTime(timer)}
                 </div>
              </div>

              <div className="mb-8 p-4 bg-hacker-green/10 border border-hacker-green/30">
                 <div className="flex justify-between items-center mb-4">
                    <div>
                      <div className="text-xs text-gray-400">ITEM</div>
                      <div className="text-xl font-bold text-white">{selectedItem?.name}</div>
                    </div>
                    <div className="text-right">
                      <div className="text-xs text-gray-400">TOTAL</div>
                      <div className="text-2xl font-bold text-yellow-500">
                         {discountApplied ? (
                            <span><span className="line-through text-gray-500 text-lg mr-2">${selectedItem.price}</span>${currentPrice}</span>
                         ) : (
                            <span>${selectedItem.price}</span>
                         )}
                      </div>
                    </div>
                 </div>
                 
                 {/* PROMO CODE SECTION */}
                 <div className="flex gap-2 items-end border-t border-gray-700 pt-4">
                     <div className="flex-grow">
                        <label className="text-xs text-gray-500 block mb-1">PROMO CODE</label>
                        <input 
                           type="text" 
                           value={promoCode}
                           onChange={(e) => setPromoCode(e.target.value)}
                           disabled={discountApplied}
                           placeholder="ENTER CODE"
                           className="w-full bg-black border border-gray-600 p-2 text-white text-sm"
                        />
                     </div>
                     <button onClick={applyPromo} disabled={discountApplied} className="bg-gray-800 text-white px-4 py-2 text-sm border border-gray-600 hover:border-hacker-green hover:text-hacker-green">APPLY</button>
                     <button onClick={() => setShowHackGame(true)} disabled={discountApplied} className="bg-hacker-red text-white px-4 py-2 text-sm font-bold animate-pulse hover:bg-red-700 flex items-center gap-1">
                        <Zap size={14}/> HACK FOR DISCOUNT
                     </button>
                 </div>
              </div>

              <div className="space-y-8 mb-8">
                 <h3 className="text-hacker-green uppercase tracking-widest border-b border-gray-800 pb-2">1. Scan & Pay</h3>
                 <p className="text-sm text-gray-400">Scan QR Code or copy address. Transfer exact amount.</p>
                 
                 <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {/* BTC */}
                    <div className="bg-gray-900/50 p-6 border border-gray-700 hover:border-yellow-500 transition-colors group flex flex-col items-center text-center">
                       <div className="mb-4 bg-white p-2 rounded">
                         <img 
                           src={`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${WALLET_BTC}`} 
                           alt="BTC QR" 
                           className="w-32 h-32"
                         />
                       </div>
                       <div className="flex items-center gap-2 font-bold text-yellow-500 mb-2">
                         <Bitcoin size={20}/> BITCOIN (BTC)
                       </div>
                       <code className="text-[10px] font-mono text-gray-400 bg-black p-2 rounded w-full break-all mb-2 border border-gray-800">
                         {WALLET_BTC}
                       </code>
                       <button 
                         onClick={() => copyToClipboard(WALLET_BTC, 'BTC')}
                         className="flex items-center gap-2 text-xs text-white hover:text-yellow-500 transition-colors"
                       >
                         <Copy size={12}/> COPY ADDRESS
                       </button>
                    </div>

                    {/* USDT */}
                    <div className="bg-gray-900/50 p-6 border border-gray-700 hover:border-green-500 transition-colors group flex flex-col items-center text-center">
                       <div className="mb-4 bg-white p-2 rounded">
                         <img 
                           src={`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${WALLET_USDT}`} 
                           alt="USDT QR" 
                           className="w-32 h-32"
                         />
                       </div>
                       <div className="flex items-center gap-2 font-bold text-green-500 mb-2">
                         <ScanLine size={20}/> USDT (ERC20)
                       </div>
                       <code className="text-[10px] font-mono text-gray-400 bg-black p-2 rounded w-full break-all mb-2 border border-gray-800">
                         {WALLET_USDT}
                       </code>
                       <button 
                         onClick={() => copyToClipboard(WALLET_USDT, 'USDT')}
                         className="flex items-center gap-2 text-xs text-white hover:text-green-500 transition-colors"
                       >
                         <Copy size={12}/> COPY ADDRESS
                       </button>
                    </div>
                 </div>
              </div>

              <form onSubmit={(e) => completeOrder(e, currentPrice)} className="space-y-6">
                 <h3 className="text-hacker-green uppercase tracking-widest border-b border-gray-800 pb-2">2. Verify Identity</h3>
                 
                 <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                   <div className="relative z-0">
                     <label className="block text-xs text-gray-500 mb-1">YOUR EMAIL (FOR DELIVERY)</label>
                     <input 
                       type="email" 
                       required
                       value={email}
                       onChange={(e) => setEmail(e.target.value)}
                       className="w-full bg-black border border-gray-700 focus:border-hacker-green text-white p-3 outline-none transition-colors font-mono relative z-10"
                       placeholder="ghost@protonmail.com"
                     />
                   </div>
                   <div className="relative z-0">
                     <label className="block text-xs text-gray-500 mb-1">INSTAGRAM / TELEGRAM USER</label>
                     <input 
                       type="text" 
                       required
                       value={insta}
                       onChange={(e) => setInsta(e.target.value)}
                       className="w-full bg-black border border-gray-700 focus:border-hacker-green text-white p-3 outline-none transition-colors font-mono relative z-10"
                       placeholder="@username"
                     />
                   </div>
                 </div>

                 <div>
                   <label className="block text-xs text-gray-500 mb-1">UPLOAD PAYMENT PROOF (SCREENSHOT)</label>
                   <div className={`relative border-2 border-dashed transition-all p-6 text-center group cursor-pointer ${file ? 'border-hacker-green bg-hacker-green/10' : 'border-gray-800 hover:border-hacker-green bg-black/50'}`}>
                     <input 
                       type="file" 
                       required
                       accept="image/*"
                       onChange={handleFileChange}
                       className="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-30"
                     />
                     
                     {previewUrl ? (
                       <div className="relative z-20">
                          <img src={previewUrl} alt="Preview" className="max-h-48 mx-auto border border-hacker-green shadow-[0_0_10px_rgba(0,255,0,0.3)]" />
                          <div className="mt-2 text-hacker-green text-xs font-bold flex items-center justify-center gap-2">
                            <CheckCircle size={14} /> IMAGE LOADED: {file.name}
                          </div>
                       </div>
                     ) : (
                       <div className="py-4">
                         <Upload className="mx-auto text-gray-600 mb-2 group-hover:text-hacker-green transition-colors" size={32} />
                         <span className="text-gray-400 text-sm group-hover:text-white transition-colors block font-bold">CLICK OR DRAG IMAGE HERE</span>
                         <span className="text-gray-600 text-xs block mt-1">SUPPORTED: JPG, PNG, WEBP</span>
                       </div>
                     )}
                   </div>
                 </div>

                 <button 
                   type="submit"
                   disabled={isSubmitting}
                   className={`
                     w-full font-bold py-4 mt-8 uppercase tracking-widest shadow-[0_0_20px_rgba(255,0,0,0.3)] hover:shadow-[0_0_30px_rgba(255,0,0,0.6)] transition-all flex items-center justify-center gap-3
                     ${isSubmitting ? 'bg-gray-800 text-gray-400 cursor-not-allowed' : 'bg-hacker-red hover:bg-red-600 text-white'}
                   `}
                 >
                   {isSubmitting ? (
                     <>
                        <Loader2 className="animate-spin" size={24} />
                        PROCESSING TRANSACTION...
                     </>
                   ) : (
                     'CONFIRM PURCHASE'
                   )}
                 </button>
              </form>
            </div>
          </div>
        );
      };

      const SuccessView = ({ goHome, enabledSound }) => (
        <div className="flex items-center justify-center min-h-[60vh] animate-fadeIn">
          <div className="text-center max-w-lg bg-black/90 border border-hacker-green p-12 shadow-[0_0_50px_rgba(0,255,0,0.2)]">
            <div className="flex justify-center mb-6">
              <div className="relative">
                <div className="absolute inset-0 bg-green-500 blur-xl opacity-50 animate-pulse"></div>
                <CheckCircle size={80} className="text-hacker-green relative z-10" />
              </div>
            </div>
            
            <h2 className="text-4xl font-bold text-white mb-4 glitch-text" data-text="ORDER RECEIVED">ORDER RECEIVED</h2>
            <p className="text-gray-400 font-mono mb-8 leading-relaxed">
              We are currently verifying the blockchain transaction on the network.
              <br/><br/>
              <span className="text-hacker-green">ESTIMATED TIME: &lt; 24 HOURS</span>
              <br/>
              Once confirmed, you will receive the download link and private key via the email provided.
            </p>
            
            <button 
              onClick={() => { goHome(); playSound('click', enabledSound); }}
              className="border border-hacker-green text-hacker-green hover:bg-hacker-green hover:text-black px-8 py-3 uppercase tracking-widest transition-all font-bold"
            >
              RETURN TO STORE
            </button>
          </div>
        </div>
      );

      // --- MAIN APP ---

      const App = () => {
        const [verified, setVerified] = useState(false);
        const [view, setView] = useState('HOME');
        const [activeTab, setActiveTab] = useState('APP');
        const [items, setItems] = useState([]);
        const [selectedItem, setSelectedItem] = useState(null);
        
        // Settings
        const [enabledSound, setEnabledSound] = useState(false);
        const [themeColor, setThemeColor] = useState('#0f0');

        // Checkout Form State
        const [email, setEmail] = useState('');
        const [insta, setInsta] = useState('');
        const [file, setFile] = useState(null);
        const [isSubmitting, setIsSubmitting] = useState(false);

        // Security Scripts & Theme
        useEffect(() => {
           // Prevent Right Click
           const handleContextMenu = (e) => e.preventDefault();
           document.addEventListener('contextmenu', handleContextMenu);

           // Prevent DevTools Shortcuts
           const handleKeyDown = (e) => {
              if (
                 e.key === 'F12' || 
                 (e.ctrlKey && e.shiftKey && e.key === 'I') || 
                 (e.ctrlKey && e.shiftKey && e.key === 'J') || 
                 (e.ctrlKey && e.key === 'U')
              ) {
                 e.preventDefault();
              }
           };
           document.addEventListener('keydown', handleKeyDown);

           return () => {
              document.removeEventListener('contextmenu', handleContextMenu);
              document.removeEventListener('keydown', handleKeyDown);
           };
        }, []);

        useEffect(() => {
           document.documentElement.style.setProperty('--theme-color', themeColor);
        }, [themeColor]);

        useEffect(() => {
          setItems(MOCK_DATA.filter(item => item.type === activeTab));
        }, [activeTab]);

        const openProduct = (item) => {
          setSelectedItem(item);
          setView('DETAIL');
          window.scrollTo(0, 0);
        };

        const goHome = () => {
          setView('HOME');
          setSelectedItem(null);
          setEmail('');
          setInsta('');
          setFile(null);
          setIsSubmitting(false);
          window.scrollTo(0, 0);
        };

        const startCheckout = () => {
          setView('CAPTCHA');
          window.scrollTo(0, 0);
        };

        const completeCaptcha = () => {
          playSound('access', enabledSound);
          setView('CHECKOUT');
        };

        const completeOrder = async (e, finalPrice) => {
          e.preventDefault();
          if(!email || !insta || !file) {
            alert("ERROR: MISSING REQUIRED DATA FIELDS.");
            playSound('error', enabledSound);
            return;
          }

          setIsSubmitting(true);

          // Prepare Telegram Data
          const formData = new FormData();
          formData.append("chat_id", TELEGRAM_CHAT_ID);
          
          const caption = `
⚠️ <b>NEW ORDER ALERT</b> ⚠️
--------------------------------
🛒 <b>Product:</b> ${selectedItem?.name}
💰 <b>Price:</b> ${finalPrice}
--------------------------------
📧 <b>Email:</b> ${email}
👤 <b>User:</b> ${insta}
--------------------------------
👇 <i>PAYMENT PROOF BELOW</i> 👇
          `;
          
          formData.append("caption", caption);
          formData.append("parse_mode", "HTML");
          formData.append("photo", file);

          try {
             // Send to Telegram API
             const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendPhoto`, {
                method: 'POST',
                body: formData
             });

             if (response.ok) {
                playSound('access', enabledSound);
                setView('SUCCESS');
                window.scrollTo(0, 0);
             } else {
                playSound('error', enabledSound);
                const errorData = await response.json();
                console.error("Telegram Error:", errorData);
                alert("ERROR: CONNECTION FAILED. PLEASE RETRY OR CONTACT ADMIN.");
             }
          } catch (error) {
             console.error("Network Error:", error);
             alert("ERROR: NETWORK CONNECTION FAILED.");
          } finally {
             setIsSubmitting(false);
          }
        };

        const copyToClipboard = (text, type) => {
          navigator.clipboard.writeText(text);
          playSound('click', enabledSound);
          alert(`${type} Address Copied to Clipboard`);
        };

        return (
          <div className="relative min-h-screen text-hacker-green font-mono crt selection:bg-hacker-red selection:text-white">
            <MatrixRain />
            
            {!verified ? (
               <SecurityCheck onVerified={() => setVerified(true)} />
            ) : (
              <>
                 <LiveLogs />
                 <PurchaseToast />
                 
                 {/* SETTINGS BAR */}
                 <div className="fixed top-4 right-4 z-50 flex gap-4 bg-black/50 p-2 rounded backdrop-blur">
                     <button onClick={() => setEnabledSound(!enabledSound)} className="hover:text-white transition-colors">
                        {enabledSound ? <Volume2 size={20}/> : <VolumeX size={20}/>}
                     </button>
                     <ThemeSwitcher setTheme={setThemeColor} />
                 </div>

                 <div className="relative z-10 max-w-6xl mx-auto px-4 py-8">
                   {view === 'HOME' && (
                     <HomeView 
                       items={items} 
                       activeTab={activeTab} 
                       setActiveTab={setActiveTab} 
                       openProduct={openProduct}
                       enabledSound={enabledSound}
                     />
                   )}
                   {view === 'DETAIL' && (
                     <DetailView 
                       selectedItem={selectedItem} 
                       goHome={goHome} 
                       startCheckout={startCheckout}
                       enabledSound={enabledSound}
                     />
                   )}
                   {view === 'CAPTCHA' && (
                     <CaptchaView onVerified={completeCaptcha} />
                   )}
                   {view === 'CHECKOUT' && (
                     <CheckoutView 
                       selectedItem={selectedItem}
                       email={email}
                       setEmail={setEmail}
                       insta={insta}
                       setInsta={setInsta}
                       file={file}
                       setFile={setFile}
                       completeOrder={completeOrder}
                       copyToClipboard={copyToClipboard}
                       setView={setView}
                       isSubmitting={isSubmitting}
                       enabledSound={enabledSound}
                     />
                   )}
                   {view === 'SUCCESS' && (
                     <SuccessView goHome={goHome} enabledSound={enabledSound} />
                   )}
                   
                   <footer className="text-center text-gray-600 text-xs border-t border-gray-900 pt-8 pb-4 font-mono mt-12">
                     <p className="mb-2">ANONYMOUS ACCESS ONLY. IP LOGGING DISABLED.</p>
                     <p className="text-gray-800">
                       DISCLAIMER: This is a website theme ("Illegal Store") for design purposes only. 
                       No actual illegal content is hosted here. All files are simulated.
                     </p>
                     <p className="mt-4">
                       <span className="text-hacker-red">ERROR 404:</span> SYSTEM IDENTIFICATION FAILED
                     </p>
                   </footer>
                 </div>
              </>
            )}
          </div>
        );
      };

      const root = createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>